some core codes
some core codes 2

changes written after foo branch starts (will be rebased)